<mat-drawer-container>
  <mat-drawer #drawer mode="over">
    <app-projects (onDrawerToggle)="drawer.toggle()"></app-projects>
  </mat-drawer>
  <mat-drawer-content>

    <div class="wrapper">
      <div class="overlay" *ngIf="showSpinner === true">
        <div fxLayout="row" fxLayoutAlign="space-around center" style="height:100%">
          <mat-spinner></mat-spinner>
        </div>    
      </div>

      <div class="loaded-content" [class.blurred]="showSpinner">   
        <app-main-toolbar (onDrawerToggle)="drawer.toggle()" class="noprint"></app-main-toolbar>
        
        <div fxLayout="row">
            <div fxFlex="{{leftArea}}" style="overflow: auto;height: 94vh;" class="noprint">

              <mat-accordion multi="true">
                <selected-item-inspector></selected-item-inspector>
                <mat-expansion-panel expanded="true">
                  <mat-expansion-panel-header>
                    <mat-panel-title>
                        Tables
                    </mat-panel-title>
                  </mat-expansion-panel-header>
                  <select-table></select-table>
                </mat-expansion-panel>                
              </mat-accordion>


            </div>
            <div fxFlex="5px" style="background-color: gray;">
            </div>
            <div fxFlex="75%" style="height: 94vh;">          
              <mat-tab-group [selectedIndex]="selectedTabIndex">
                <mat-tab label="Topology">

                  <ng-template mat-tab-label class="noprint">
                    <mat-icon class="example-tab-icon" class="noprint">leaderboard</mat-icon>
                    Topology
                  </ng-template>              

                  <div style="overflow: hidden;height: 87vh;">
                    <app-topology></app-topology>      
                  </div>
                </mat-tab>
                <mat-tab label="Data" class="noprint">
                  <div style="overflow: auto;height: 87vh;">
                    <topology-grid-view></topology-grid-view>
                  </div>              
                </mat-tab>            
                <mat-tab label="Templates" class="noprint">
                  <div style="overflow: auto;height: 87vh;">
                    <tepmlate-editor></tepmlate-editor>
                  </div>
                </mat-tab>
                <mat-tab label="Commands" class="noprint">
                  <div style="overflow: auto;height: 87vh;">
                    <app-commands></app-commands>
                  </div>
                </mat-tab>
                <ng-template [ngIf]="openFiles.length > 0">
                  <mat-tab *ngFor="let file of openFiles" [label]="file.shortName()" class="noprint">
                    <ng-template mat-tab-label>
                      <mat-icon (click)="deleteFile(file.name)">close</mat-icon>
                      {{file.shortName()}}
                    </ng-template>
                    <div style="overflow: auto;height: 87vh;">
                      <div ace-editor [text]="file.content||''" [theme]="'eclipse'" [mode]="'sql'" style="height:100%;" [readOnly]="true"></div>
                    </div>
                  </mat-tab>
                </ng-template>                
              </mat-tab-group>
            </div>
        </div>
      </div>
    </div>
  </mat-drawer-content>
</mat-drawer-container>